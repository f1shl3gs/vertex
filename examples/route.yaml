sources:
  logs1:
    type: demo_logs
    format:
      type: shuffle
      lines:
        - info blah

  logs2:
    type: demo_logs
    format:
      type: shuffle
      lines:
        - warn blah

  logs3:
    type: demo_logs
    format:
      type: shuffle
      lines:
        - error blah

transforms:
  route:
    type: route
    inputs:
      - logs1
      - logs2
      - logs3
    route:
      info: .message contains info
      warn: .message contains warn

  info:
    type: rewrite
    inputs:
      - route.info
    script: |
      .level = info

  warn:
    type: rewrite
    inputs:
      - route.warn
    script: |
      .level = warn

sinks:
  stdout:
    type: console
    stream: stdout
    encoding:
      codec: json
    inputs:
      - info
      - warn