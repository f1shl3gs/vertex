extensions:
  docker:
    type: docker_observer
    exclude_images:
      - ^kind
  tap:
    type: remote_tap

sources:
  http:
    type: multiplier
    observer: docker
    templates:
      - rule: details.port == 9100 # prometheus_exporter sink
        config:
          type: http_check
          targets:
          - http://${{ target }}
          interval: 1s

sinks:
  prom:
    type: prometheus_exporter
    inputs:
      - http
